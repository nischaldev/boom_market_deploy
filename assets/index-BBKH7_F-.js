import{K as p,g as q,E as $,a as V,V as X,_ as P,Q as Y,F as U,n as Z,b as ee,T as te,P as oe}from"./mftsccs-browser-B-m6bF-P.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const A={baseURL:"https://boomconsole.com/api/v1",baseNodeUrl:"https://boomconsole.com",boomURL:"https://boomconsole.com",aiURL:"https://www.ai.freeschema.com/api",deployURL:"https://deploy.freeschema.com",CLIENT_ID:"636550695311-ctc09991hhu6iav4kkhnp1ge537nec2i.apps.googleusercontent.com",logserver:"https://logger.freeschema.com",enableSW:!1,discussion_community:101765915,ai_widget:101934087,visual_prototype_widget:101938499,video_tutorial_widget:102040172,subscriptionId:102121109,documentation_preview_widget:102097744,folder_widget:102400016,assets_widget:102410590,VITE_DEV_BASE:"http://localhost:5173",VITE_CDN_BASE:"https://cdn.jsdelivr.net/gh/nischaldev/sleepinghats-cdn@master"};async function v(){return new Promise(e=>{let t=localStorage?.getItem("profile")||"";if(t){const o=JSON.parse(t);e(o)}else e()})}async function ne(){return new Promise(e=>{let t=localStorage?.getItem("tempwidget")||"";if(t){const o=JSON.parse(t);e(o)}else e()})}const re=A?.baseNodeUrl;class g{static instance;static getInstance(){return g.instance||(g.instance=new g),g.instance}async getLoginInfo(){const t=await v(),o=await this.checkIfUserIsAdmin(t?.userConcept);let n="",r=!1,a=!1;if(t?.token){r=!0;let s="",i="";if(t?.entityId){let l=new p;l.typeConnection="the_entity_firstname",l.name="entity_firstname";let u=new p;u.typeConnection="the_entity_lastname",u.name="entity_lastname";let d=new p;d.typeConnection="the_entity_tour_status",d.name="entity_tour_status";let h=new p;h.type="the_entity",h.name="top",h.conceptIds=[t.entityId],h.freeschemaQueries=[l,u,d],h.outputFormat=q;let m;await $(h,"").subscribe(_=>{m=_}),s=m?.[0]?.the_entity?.the_entity_firstname?.the_firstname||"",i=m?.[0]?.the_entity?.the_entity_lastname?.the_lastname||"",a=m?.[0]?.the_entity?.the_entity_tour_status?.the_tour_status==="true"}n=`
        <div id="profileIcon" class="position-relative" onclick="headerFunctions.openUserActionModel()">
          ${t?.email?.slice(0,1)}
          <div id="profileDropdown">
            <div class="user-email">
              <span class="material-symbols-outlined">account_circle</span>
              <div class="user-info">
                <div class="full-name">${s} ${i}</div>
                <div class="email">${t?.email}</div>
              </div>
            </div>
            <!-- <router-link href="" class="dropdown-item danger" onclick="logout(event)">
              <span class="material-symbols-outlined">logout</span>
              Logout
            </router-link> -->
            <router-link class="dropdown-item danger" id="wico_btn-logout">
              <span class="material-symbols-outlined">logout</span>
              Logout
            </router-link>
          </div>
        </div>
      `}else r=!1,n=`
        <div class="d-flex flex-row gap-2">
          <!-- <router-link class="btn btn-primary" onclick="openLoginModal(event)">Login</router-link>
          <router-link class="btn btn-secondary" onclick="openSignupModal(event)">Signup</router-link> -->

          <router-link class="btn btn-primary wico_btn-openLoginModal">Login</router-link>
          <router-link class="btn btn-secondary wico_btn-openSignupModal">Signup</router-link>
        </div>
      `;return{loginInfoHTML:n,isLoggedIn:r,isAdmin:o,tourStatus:a}}async checkIfUserIsAdmin(t){try{return(await V(t))?.accessId===3}catch(o){return console.error("Error fetching user concept:",o),!1}}async logout(){const t=await ne();await X(t?.id);try{window.OneSignalDeferred=window.OneSignalDeferred||[],window.OneSignalDeferred.push(async function(o){await o.logout()})}catch(o){console.warn("Error clearing OneSignal session:",o)}localStorage.removeItem("profile"),localStorage.removeItem("tempwidget"),location.reload()}async checkAndUpdateToken(){try{const t=await v();if(!t?.token){console.warn("No token found in local storage.");return}const o=t.token,n=t.refreshToken,r=new Headers;r.append("Content-Type","application/json");const a={accessToken:o,refreshToken:n},i=await(await fetch(`${re}/api/Auth/refresh`,{method:"POST",headers:r,body:JSON.stringify(a)})).json();if(i.success&&i.data){const{accessToken:l,refreshToken:u}=i.data;t.token=l,t.refreshToken=u,localStorage.removeItem("profile"),localStorage.setItem("profile",JSON.stringify(t))}else this.logout()}catch(t){console.error("Error refreshing token:",t)}}}const ae=g.getInstance();(function(){const t=window.fetch;window.fetch=async(...o)=>{const n=o[1]||{};try{const r=await t(...o);if(r.status===401){console.warn("401 Unauthorized - Refreshing token"),await ae.checkAndUpdateToken();const a=await v();if(!a?.token)return console.error("Token refresh failed. User not logged in."),r;if(n.headers){const s=new Headers(n.headers);s.set("Authorization",`Bearer ${a.token}`),s.has("Content-Type")||s.set("Content-Type","application/json"),n.headers=s}return t(o[0],n)}return r}catch(r){throw console.error("Intercepted Fetch Error:",r),r}}})();const W=async e=>{let t=new p;t.typeConnection="the_project_environment",t.selectors=["the_environment_name","the_environment_value"];let o=new p;o.conceptIds=[e],o.freeschemaQueries=[t];let n=await P(o,""),r=null;for(let a=0;a<n.length;a++){let s=n[a]?.the_project;if(s){let l=s?.the_project_environment?.the_environment;if(l&&(r=l?.the_environment_value?.the_environment_value,r))try{r=JSON.parse(r)}catch(u){console.error("Error parsing environment values:",u),r=null}}}if(console.log("Environment values loaded:",r),r){for(const a in r)if(Object.prototype.hasOwnProperty.call(r,a)){const s=r[a];console.log("Setting environment variable:",a,s),Y.setValue(a,s)}}};async function se(e){console.log("projectId",e);let t;if(e||(t=G()),!e&&!t?.projectId)return console.log("Project Id not found"),[];if(!e&&t.projectId&&(e=t?.projectId),console.log("projectId 2",e),!e)return[];const o=["the_item_menu_name","the_item_menu_link","the_item_menu_action","the_item_menu_auth","the_item_menu_order","the_item_menu_page"],n=new p;n.typeConnection="the_menu_s_item",n.selectors=o;function r(d,h=5){if(h==5)return;const m=new p;m.typeConnection="the_menu_s_item",m.selectors=o,d.name=h.toString(),d.freeschemaQueries=[m];const _=h+1;r(m,_)}const a=new p;a.conceptIds=[e],r(a,1);const s=await P(a,"");console.log("valllu",s);const i=s?.[0]?.the_project?.the_menu_s_item||[],l=(d=[])=>{let h=[];for(let m=0;m<d.length;m++){const _=d[m];h.push({name:_?.the_item_menu?.the_item_menu_name?.the_name??"",link:_?.the_item_menu?.the_item_menu_link?.the_link??"",action:_?.the_item_menu?.the_item_menu_action?.the_action??"",page:_?.the_item_menu?.the_item_menu_page?.the_page?Number(_?.the_item_menu?.the_item_menu_page?.the_page):"",order:_?.the_item_menu?.the_item_menu_order?.the_order?Number(_?.the_item_menu?.the_item_menu_order?.the_order):0,auth:_?.the_item_menu?.the_item_menu_auth?.the_auth=="true",menus:l(_?.the_item_menu?.the_menu_s_item)??[]})}return h.sort((m,_)=>m.order-_.order)};return l(i)}const D="wico_site";function G(){const e=atob(localStorage.getItem(D)||"");return e?JSON.parse(e):{}}function x(e,t){const o=G();o[e]=t,localStorage.setItem(D,btoa(JSON.stringify(o)))}function F(){window.wico={fetchMenus:se}}const c={PAGE_COMP_NAME:"page",WIDGET_COMP_NAME:"widget",PROJECT_COMP_NAME:"project"},ie={PROJECT_PAGE_LINKER:"s_page"};async function O(e){[{key:"meta_title",value:e?.[`the_${c.PAGE_COMP_NAME}_meta_title`]?.data?.the_meta_title},{key:"meta_description",value:e?.[`the_${c.PAGE_COMP_NAME}_meta_description`]?.data?.the_meta_description},{key:"meta_keywords",value:e?.[`the_${c.PAGE_COMP_NAME}_meta_keywords`]?.data?.the_meta_keywords},{key:"width",value:e?.[`the_${c.PAGE_COMP_NAME}_width`]?.data?.the_width},{key:"font_size",value:e?.[`the_${c.PAGE_COMP_NAME}_font_size`]?.data?.the_font_size},{key:"font_family",value:e?.[`the_${c.PAGE_COMP_NAME}_font_family`]?.data?.the_font_family},{key:"type",value:e?.[`the_${c.PAGE_COMP_NAME}_type`]?.data?.the_type}].forEach(o=>{o.value&&ce(o.key,o.value)})}async function ce(e,t){const o=document.getElementById("fspage-properties")||le();let n="";switch(e){case"width":y(".fspage { width: [^;]+ !important; }"),n=t?`.fspage { width: ${t} !important; }`:"";break;case"font_size":y(".fspage { font-size: [^;]+; }"),n=t?`.fspage { font-size: ${t}px; }`:"";break;case"font_family":y(".fspage { font-family: [^;]+; }"),n=t?`.fspage { font-family: ${t}; }`:"";break;case"type":y(".fspage { width: 1200px; margin: 0 auto; }"),y(".fspage { width: 100%; padding: 0; }"),t==="fixed"?n=".fspage { width: 1200px; margin: 0 auto; }":t==="fluid"?n=".fspage { width: 100%; padding: 0; }":n="";break;case"meta_title":document.title=t;break;case"meta_keywords":M(e.replace("meta_",""),t);break;case"meta_description":M(e.replace("meta_",""),t);return}o.textContent+=n}function le(){const e=document.createElement("style");return e.id="fspage-properties",document.head.appendChild(e),e}function M(e,t){let o=document.querySelector(`meta[name="${e}"]`);o||(o=document.createElement("meta"),o.setAttribute("name",e),document.head.appendChild(o)),o.setAttribute("content",t)}function y(e){const t=document.getElementById("fspage-properties");if(!t)return;let o=t?.textContent;o=o?o.replace(new RegExp(e,"g"),""):"",t.textContent=o}let f=[],k,E="",N=!1,L="";const b="storeOwner",S=async e=>{ye(e),await Promise.all([Ee(e),ge(e)]),x("projectId",e),F(),z()},de=async e=>{document.title=e?.storeName||"Store",Q(e?.storeLogo),k=e?.mainPageId,E=e?.projectName,f=e?.pagesList,localStorage.setItem(b,btoa(e?.entityId)),x("projectId",e?.projectId),e?.projectId&&await W(parseInt(e?.projectId)),F(),z()},z=()=>{window.addEventListener("popstate",()=>I(window.location.href)),document.addEventListener("click",e=>{const o=e.target.closest("a");if(!o||o.target==="_blank"||o.hasAttribute("download")||o.getAttribute("rel")==="external"||e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||o.origin!==location.origin)return;const n=o.getAttribute("href");!n||n.startsWith("#")||n.startsWith("mailto:")||(e.preventDefault(),history.pushState({},"",n),I(n))},!0),I(window.location.href)},I=async e=>{const{pathname:t}=new URL(e,window.location.origin);if(L==t)return;L=t;const o=me(t),n=he(e),r=document.head.querySelectorAll("style#mystyleid");if(console.log("abc",t,f,o),o){const a=f.find(s=>s.path==o.route);R(a,{params:o?.params,queryParams:n}).then(async()=>{Array.from(r).forEach(i=>i.remove());const s=await j(a?.id);O(s?.data?.[`the_${c.PAGE_COMP_NAME}`])}).catch(s=>{console.error("Error during page route chain:",s)})}else if(t==="/"&&k){const a=f.find(s=>s.id==k);R(a,{params:{},queryParams:n}).then(async()=>{Array.from(r).forEach(i=>i.remove());const s=await j(a?.id);O(s?.data?.[`the_${c.PAGE_COMP_NAME}`])}).catch(s=>{console.error("Error during page route chain:",s)})}else{const a=f.find(s=>s.path=="/404");a?B(a.page):document.querySelector("#app").innerHTML=`
      <div class="not-found-container">
        <h1>404</h1>
        <h2>Page Not Found</h2>
        <p>Sorry, the page you are looking for does not exist.</p>
        <a href="/" class="button">Go to Home Page</a>
      </div>
    `,Array.from(r).forEach(s=>s.remove())}document.getElementById("global-loader")?.classList.add("d-none")},R=async(e,t)=>{_e(e),e.page?await B(e,t):console.warn("No page content Found")};function he(e){const{searchParams:t}=new URL(e,window.location.origin),o={};for(const[n,r]of t.entries())o[n]?o[n]=Array.isArray(o[n])?[...o[n],r]:[o[n],r]:o[n]=r;return o}const me=e=>{const n=[...f.map(r=>r.path)].sort((r,a)=>{const s=r.split("/").filter(Boolean),i=a.split("/").filter(Boolean),l=s.filter(d=>d.startsWith(":")).length,u=i.filter(d=>d.startsWith(":")).length;return l!==u?l-u:i.length-s.length});console.log("routes",n);for(let r=0;r<n.length;r++){const s=(n[r]?.startsWith("/")?n[r]:`/${n[r]}`).split("/").filter(Boolean),i=e.split("/").filter(Boolean);if(s.length!==i.length)continue;const l={};if(s.every((d,h)=>d.startsWith(":")?(l[d.slice(1)]=i[h],!0):d===i[h]))return{route:n[r],params:l}}return null};function ue(e){const t=document.createElement("style");t.id="added-style",t.classList.add("ghost-css"),t.textContent=e,document.head.appendChild(t)}function pe(){const e=document.getElementsByClassName("ghost-css");for(;e.length>0;)e[0].remove()}const B=async(e,t)=>{const o=document.querySelector("#app");let n=e.htmlcache,r=e.csscache;o&&n!=""&&(console.log("inserted the application cache",r),o.innerHTML=n,ue(r)),o&&(await ee(e?.page,o,t),setTimeout(()=>{pe()},3e3))};async function j(e){return new Promise(async t=>{let o=new p;o.conceptIds=[e],o.outputFormat=U,o.selectors=[`the_${c.PAGE_COMP_NAME}_title`,`the_${c.PAGE_COMP_NAME}_slug`,`the_${c.PAGE_COMP_NAME}_meta_title`,`the_${c.PAGE_COMP_NAME}_meta_description`,`the_${c.PAGE_COMP_NAME}_meta_keywords`,`the_${c.PAGE_COMP_NAME}_width`,`the_${c.PAGE_COMP_NAME}_type`,`the_${c.PAGE_COMP_NAME}_font_family`,`the_${c.PAGE_COMP_NAME}_font_size`,`the_${c.PAGE_COMP_NAME}_body`,`the_${c.WIDGET_COMP_NAME}_clean`],o.inpage=100,$(o,"").subscribe(async n=>{n.length?t(n?.[0]):!Array.isArray(n)&&n?.data==null&&t({error:!0,message:"There is no data."})}).catch(n=>{const r=n?.message;t({error:!0,message:r})})})}const _e=e=>{if(N)return;const t=new URL(window.location.href).hostname.split(".")[0].split("-")[1],o=fe(t,e),n=new Blob([JSON.stringify(o)],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("link");a.rel="manifest",a.href=r,document.head.appendChild(a),N=!0};function fe(e,t){let o="/icons/icon-192x192.jpg",n="/icons/iicon-512x512.jpg",a=window.location.hostname;return a.startsWith("www.")&&(a=a.substring(4)),{name:`${E||t.title||t.slug||e}`,short_name:`${E||e}`,start_url:location.origin+"/index.html",display:"standalone",theme_color:e?"#ff6600":"#ffffff",icons:[{src:`${location.origin}${o}`,sizes:"192x192",type:"image/png"},{src:`${location.origin}${n}`,sizes:"512x512",type:"image/png"}],share_target:{action:`${location.origin}/captures`,method:"POST",enctype:"multipart/form-data",params:{title:"title",text:"text",url:"url",files:[{name:"media",accept:["image/*","video/*"]}]}}}}const ge=async e=>{try{localStorage.removeItem(b);const t=new p;t.name="entity",t.typeConnection="the_entity_s_project",t.reverse=!0;const o=new p;o.name="project",o.conceptIds=[e],o.freeschemaQueries=[t],o.outputFormat=Z;const n=await P(o,"");if(!n?.[0]?.the_project?.the_entity_s_project_reverse?.[0]?.id)return;n?.[0]?.the_project?.the_entity_s_project_reverse?.length==1&&localStorage.setItem(b,btoa(n[0].the_project.the_entity_s_project_reverse[0].id.toString()));for(let r=0;r<n?.[0]?.the_project?.the_entity_s_project_reverse?.length;r++)(n?.[0]?.the_project?.the_entity_s_project_reverse[r]).id!=102176333&&localStorage.setItem(b,btoa(n[0].the_project.the_entity_s_project_reverse[0].id.toString()))}catch(t){console.error(t)}};async function ye(e){try{const t=new p;t.name="store",t.typeConnection="the_project_refers",t.selectors=["the_store_name","the_store_logo"];const o=new p;o.name="project",o.conceptIds=[e],o.freeschemaQueries=[t];const r=(await P(o,""))?.[0]?.the_project?.the_project_refers?.the_store,a=r?.the_store_name?.the_name;document.title=a||"Store",Q(r?.the_store_logo?.the_logo)}catch(t){console.error(t)}}function we(e){return new Promise((t,o)=>{const n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=()=>{const a=document.createElement("canvas");a.width=a.height=512;const s=a.getContext("2d");s?.clearRect(0,0,a.width,a.height);const i=n.width/n.height;let l=512,u=512;i>1?u=512/i:l=512*i;const d=(512-l)/2,h=(512-u)/2;s?.drawImage(n,d,h,l,u);const m=a.toDataURL("image/png");t(m)},n.onerror=()=>{o(new Error("Image failed to load. Check CORS."))}})}async function Ee(e){const o=(await v())?.token;let n=new p;n.name="page",n.typeConnection=`the_${c.PROJECT_COMP_NAME}_${ie.PROJECT_PAGE_LINKER}`,n.selectors=[`the_${c.PAGE_COMP_NAME}_title`,`the_${c.PAGE_COMP_NAME}_slug`,`the_${c.PAGE_COMP_NAME}_body`];let r=new p;r.name="project",r.conceptIds=[e],r.selectors=[`the_${c.PROJECT_COMP_NAME}_name`,`the_${c.PROJECT_COMP_NAME}_main_page`],r.freeschemaQueries=[n],r.outputFormat=U;const a=await P(r,o);let s={mainPageId:a?.[0]?.data?.the_project?.the_project_main_page?.id,name:a?.[0]?.data?.the_project?.the_project_name?.data.the_name||"",pages:a?.[0]?.data?.the_project?.the_project_s_page?.map(i=>({id:i?.id,title:i?.data?.the_page?.the_page_title?.data?.the_title||"",path:i?.data?.the_page?.the_page_slug?.data?.the_slug||"",page:i?.data?.the_page?.the_page_body?.id}))||[]};k=s.mainPageId,E=s.name,f=s.pages}function Q(e=""){var t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t),setTimeout(()=>t?.remove(),1e4)),e&&we(e).then(o=>{t.href=o}).catch(o=>{console.error(o),t.href="https://www.sleepinghats.com/images/favicon/icon-64x64.png"})}async function H(){}const J=async e=>{const t=document.getElementById("global-loader");t?.classList.remove("d-none");try{history.pushState(null,"",e),await H()}finally{t?.classList.add("d-none")}},ve=()=>{const e=window.location.pathname+window.location.search;J(e)},Pe=()=>{customElements.define("router-link",class extends HTMLElement{constructor(){super(),this.handleClick=this.handleClick.bind(this),this.href&&this.attachShadow({mode:"open"})}connectedCallback(){if(this.href){const e=document.createElement("a");e.href=this.href,this.forwardAttributes(e),e.setAttribute("part","link");const t=document.createElement("slot");e.appendChild(t),this.shadowRoot&&this.shadowRoot.appendChild(e),this.addEventListener("click",this.handleClick),e.href&&this.setAttribute("href",e.href)}else this.addEventListener("click",this.handleClick)}forwardAttributes(e){["target","download","rel","hreflang","type","title","tabindex","accesskey"].forEach(o=>{this.hasAttribute(o)&&e.setAttribute(o,this.getAttribute(o))})}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}handleClick(e){const t=this.getAttribute("target"),o=this.getAttribute("href");t==="_blank"||e.ctrlKey||e.metaKey||e.button===1||this.hasAttribute("download")||o&&!o.startsWith("http")&&!o.startsWith("//")&&(e.preventDefault(),J(o))}set href(e){this.setAttribute("href",e);const t=this.shadowRoot&&this.shadowRoot.querySelector("a");t&&(t.href=e)}get href(){return this.getAttribute("href")}set target(e){e&&this.setAttribute("target",e)}get target(){return this.getAttribute("target")}})};function be(){ve(),Pe(),window.addEventListener("popstate",H)}const ke=async()=>{const e=["localhost","visualwidget.boomconcole.com","develop.freeschema.com"],t=window.location.hostname,o=t.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(o&&await W(parseInt(o)),o)S(parseInt(o));else if(e.includes(t))be();else try{Ae(t)}catch(n){console.error(n),C()}};function C(){const e=document.getElementById("global-loader");e&&e.setAttribute("style","display: none !important");const t=document.getElementById("app");t&&(t.innerHTML=`
    <div class="not-found-container">
      <h1>404</h1>
      <h2>Page Not Found</h2>
      <p>Sorry, the page you are looking for does not exist.</p>
      <a href="/" class="button">Go to Home Page</a>
    </div>
  `)}function Ae(e=""){try{const t=JSON.parse(sessionStorage.getItem("cacheServers")??"[]")||[],o=t.length>0&&t?.[0]!="https://boomconsole.com"?t[0]:A.deployURL,n=new URLSearchParams;n.append("url",e),console.log("server",o),fetch(o+"/api/project-deploy",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then(async r=>{const a=await r.json();de(a.data)}).catch(r=>{console.error(r),T(e);try{const s=JSON.parse(sessionStorage.getItem("domainRecord")??"{}");if(s&&s.expiresAt>Date.now()){const i=s.value;i&&S(parseInt(i));return}}catch(a){console.error(a),C()}})}catch(t){console.error(t),T(e)}}function T(e=""){const t=new URLSearchParams;t.append("url",e),fetch(A.baseURL+"/dns/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then(async o=>{const n=await o.json();if(!n)Se();else{const r=n?.startsWith("http")?n:"http://"+n,s=new URL(r).hostname?.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(s)S(parseInt(s));else throw new Error("Path Not Valid")}}).catch(o=>{console.error(o),C()})}function Se(){fetch(A.baseURL+"/cname").then(async e=>{const t=await e.json()||[];if(t?.[0]){const o=t[0]?.startsWith("http")?t[0]:"http://"+t[0],r=new URL(o).hostname?.split(".")?.[0]?.match(/preview-(\d+)/)?.[1];if(r)S(parseInt(r));else throw new Error("Path Not Valid")}else throw new Error("Doamin Not Found")}).catch(e=>{console.error(e),C()})}const w={baseNodeUrl:"https://boomconsole.com",boomURL:"https://boomconsole.com",aiURL:"https://www.ai.freeschema.com/api",logserver:"https://logger.freeschema.com",enableSW:!1};let K=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),K=e});const Ce={activate:w.enableSW,scope:"/",pathToSW:"/serviceWorker.bundle.js",manual:!0};"serviceWorker"in navigator&&(navigator.serviceWorker.register("/OneSignalSDKWorker.js").then(()=>{console.log("Service Worker registered")}),navigator.serviceWorker.addEventListener("message",e=>{const{title:t,text:o,url:n,file:r}=e.data;console.log("Shared data received:",{title:t,text:o,url:n,file:r})}));window.OneSignalDeferred=window.OneSignalDeferred||[];window.OneSignalDeferred.push(async function(e){await e.init({appId:"e2f1add1-06d1-42ae-a95b-90da3ceddb70"})});te(w?.boomURL,w?.aiURL,"",w?.baseNodeUrl,void 0,"boomconsolepwa",Ce,{logApplication:!0,logPackage:!1,isTest:!1,accessTracker:!1},{logserver:w.logserver});const Ie=await v();oe(Ie?.token);ke();window.PWAInstallHandler=(()=>{let e=null,t=null,o=null;return{init:({onInstall:s,onDismiss:i})=>{t=s,o=i,e=K,window.addEventListener("appinstalled",()=>{console.log("PWA installed successfully!"),t&&t()})},isInstalled:()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator?.standalone,showInstallPrompt:()=>{console.log("deferedPrompt",e),e&&(e.prompt(),e.userChoice.then(s=>{s.outcome==="accepted"?(console.log("User installed the PWA."),t&&t()):(console.log("User dismissed the install prompt."),o&&o()),e=null}))}}})();
